(function(e){function t(t){for(var a,i,o=t[0],u=t[1],l=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0b75":function(e,t,r){"use strict";r("c048")},"230c":function(e,t,r){},"25a1":function(e,t,r){"use strict";r("e83b")},"2dda":function(e,t,r){"use strict";r("6a69")},"483f":function(e,t,r){},5338:function(e,t,r){"use strict";r("230c")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("4de4"),r("4d90"),r("99af");var a,n,s=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],u=r("2877"),l={},c=Object(u["a"])(l,i,o,!1,null,null,null),d=c.exports,m=r("bc3a"),p=r.n(m),g=r("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login_container",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}}},[a("img",{staticClass:"image_backgrund",attrs:{src:r("95fc"),alt:""}}),a("div",{staticClass:"body_shade"}),a("div",{staticClass:"login_box"},[e._m(0),a("el-form",{ref:"loginFormRef",staticClass:"login_from",attrs:{"label-width":"0px",model:e.loginForm,rules:e.loginFormRules}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入账号","prefix-icon":"iconfont icon-denglu"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码","prefix-icon":"iconfont icon-suo",type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),a("el-button",{attrs:{type:"danger"},on:{click:e.resetLoginForm}},[e._v("重置")])],1)],1)],1)])},h=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar_box"},[a("img",{attrs:{src:r("cf05"),alt:""}})])}],b=r("1da1"),w=(r("96cf"),r("8237")),v=r.n(w),y={data:function(){return{loginForm:{username:"admin",password:"admin"},loginFormRules:{username:[{required:!0,message:"请输入登录名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:5,max:15,message:"长度在 5 到 15 个字符",trigger:"blur"}]}}},methods:{resetLoginForm:function(){this.$refs.loginFormRef.resetFields()},login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return a={username:e.loginForm.username,password:v()(e.loginForm.password)},t.next=5,e.$http.post("/login",a);case 5:if(n=t.sent,s=n.data,200===s.meta.status){t.next=9;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 9:e.$message.success("登录成功"),window.sessionStorage.setItem("token",s.data.token),window.sessionStorage.setItem("userMsg",JSON.stringify({user_id:s.data.id,user_name:s.data.username,status:s.data.status})),e.$router.push("/home");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},_=y,x=(r("5338"),Object(u["a"])(_,f,h,!1,null,null,null)),k=x.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home-container"},[r("el-header",{ref:"header"},[r("div",[r("span",[e._v("后台管理")])]),r("span",[e._v(e._s(e.userMsg.user_name))]),r("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("退出")])],1),r("el-container",[r("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[r("el-menu",{class:0==e.status?"":"fiedx",attrs:{"background-color":"#444444","text-color":"#fff","active-text-color":"#e37554","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1,router:!0,"default-active":e.activePath}},[r("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[r("a",{staticStyle:{color:"#fff",fontSize:"14px"}},[e._v(e._s(e.btntext))])]),e._l(e.menulist,(function(t,a){return r("el-submenu",{key:t.name,attrs:{index:a+""}},[r("template",{slot:"title"},[r("i",{class:e.iconsObj[a]}),r("span",[e._v(e._s(t.name))])]),e._l(t.list,(function(t){return r("el-menu-item",{key:t.nav,attrs:{index:t.nav},on:{click:function(r){return e.saveNavState(t.nav)}}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),r("span",[e._v(e._s(t.name))])])],2)}))],2)}))],2)],1),r("el-main",[r("keep-alive",{attrs:{include:"AppUser,VirtualUser,SceneCrawling,AudioTagManage,AudioTag"}},[r("router-view")],1)],1)],1),r("el-backtop",{attrs:{bottom:100}},[e._v("回到顶部")])],1)},F=[],S=(r("a9e3"),{data:function(){return{menulist:[],iconsObj:{0:"iconfont icon-yonghuguanli",1:"iconfont icon-sucai-outline",2:"iconfont icon-biaoqian1",3:"iconfont icon-yonghuguanli1"},isCollapse:!1,activePath:"",userMsg:{},btntext:"<合并",status:!1}},created:function(){this.judgeAamin(),this.activePath=window.sessionStorage.getItem("activePath"),this.userMsg=JSON.parse(window.sessionStorage.getItem("userMsg")),this.getPath()},mounted:function(){window.addEventListener("scroll",this.headerScroll)},methods:{judgeAamin:function(){var e=JSON.parse(window.sessionStorage.getItem("userMsg"));2===e.status?this.menulist=[{name:"用户管理",list:[{name:"所有用户",nav:"/allUser"},{name:"关键词",nav:"/keyword"}]},{name:"素材管理",list:[{name:"所有素材",nav:"/allScene"},{name:"素材爬取",nav:"/sceneCrawling"}]},{name:"标签管理",list:[{name:"所有标签",nav:"/allTag"}]},{name:"权限管理",list:[{name:"所有账号",nav:"/allAccount"}]}]:this.menulist=[{name:"用户管理",list:[{name:"所有用户",nav:"/allUser"},{name:"关键词",nav:"/keyword"}]},{name:"素材管理",list:[{name:"所有素材",nav:"/allScene"},{name:"素材爬取",nav:"/sceneCrawling"}]},{name:"标签管理",list:[{name:"所有标签",nav:"/allTag"}]}]},getPath:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getPath");case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("资源访问路径获取失败"));case 6:window.sessionStorage.setItem("path",JSON.stringify(a.data));case 7:case"end":return t.stop()}}),t)})))()},toggleCollapse:function(){this.isCollapse=!this.isCollapse,!0===this.isCollapse?this.btntext="展开>":this.btntext="<合并"},saveNavState:function(e){window.sessionStorage.setItem("activePath",e),this.activePath=e},logout:function(){window.sessionStorage.clear(),this.$router.push("/")},headerScroll:function(){var e=Number(parseInt(this.$refs.header.height)),t=document.documentElement.scrollTop||document.body.scrollTop;this.status=t>=e}}}),C=S,I=(r("2dda"),Object(u["a"])(C,$,F,!1,null,"6292b0d8",null)),R=I.exports,D=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},q=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("h1",[e._v("welcome")])])}],O={data:function(){return{}}},L=O,V=(r("fcbf"),Object(u["a"])(L,D,q,!1,null,"96e1658a",null)),T=V.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("所有账号")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.searchUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUserList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:10}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDilogVisible=!0}}},[e._v("添加管理账号")])],1)],1),r("el-table",{attrs:{data:e.userlist,border:"",stripe:""}},[r("el-table-column",{attrs:{align:"center",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"ID",prop:"id"}}),r("el-table-column",{attrs:{align:"center",label:"账号名",prop:"username"}}),r("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.row.create_time))+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"管理员权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.userStateChanged(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeUserById(t.row.id)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.start,"page-sizes":[5,10,20,50,100],"page-size":e.queryInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加账号",visible:e.addDilogVisible,width:"50%"},on:{"update:visible":function(t){e.addDilogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.FormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{attrs:{label:"管理员",prop:"status"}},[r("el-switch",{model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDilogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改账号",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.FormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1)],1)},j=[],P={data:function(){return{queryInfo:{query:"",start:1,limit:10},userlist:[],total:0,addDilogVisible:!1,addForm:{username:"",password:"",status:!1},FormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"用户名的长度应在2~10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:15,message:"密码的长度应在5~15个位之间",trigger:"blur"}]},editDialogVisible:!1,editForm:{id:"",username:"",password:""}}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/allAdminUser",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.userlist=a.data,e.total=a.meta.sum;case 8:case"end":return t.stop()}}),t)})))()},searchUserList:function(){this.queryInfo.start=1,this.getUserList()},userStateChanged:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.put("/setAdminStatus?status=".concat(!1===e.status?1:2,"&id=").concat(e.id));case 2:if(a=r.sent,n=a.data,201===n.meta.status){r.next=7;break}return e.status=!e.status,r.abrupt("return",t.$message.error(n.meta.msg));case 7:t.$message.success("操作成功"),e.id===JSON.parse(window.sessionStorage.getItem("userMsg")).user_id&&!1===e.status&&(window.sessionStorage.clear(),t.$router.push("/"));case 9:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryInfo.limit=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.start=e,this.getUserList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this,t={username:this.addForm.username,password:v()(this.addForm.password),status:!0===this.addForm.status?1:2};this.$refs.addFormRef.validate(function(){var r=Object(b["a"])(regeneratorRuntime.mark((function r(a){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,e.$http.post("/addAdminUser",t);case 4:if(n=r.sent,s=n.data,201===s.meta.status){r.next=9;break}return e.$message.error(s.meta.msg),r.abrupt("return");case 9:e.$message.success("添加账号成功"),e.addDilogVisible=!1,e.getUserList();case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.editForm.username=e.username,t.editForm.id=e.id,t.editDialogVisible=!0;case 3:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editUserInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return a={id:e.editForm.id,password:v()(e.editForm.password)},t.next=5,e.$http.post("/editAdmin",a);case 5:if(n=t.sent,s=n.data,201===s.meta.status){t.next=9;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 9:e.editDialogVisible=!1,e.getUserList(),e.$message.success("更新成功");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removeUserById:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",t.$message.info("已取消删除"));case 5:return r.next=7,t.$http.delete("/delAdmin?id=".concat(e));case 7:if(n=r.sent,s=n.data,201===s.meta.status){r.next=11;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 11:if(t.$message.success("删除用户成功"),e!==JSON.parse(window.sessionStorage.getItem("userMsg")).user_id){r.next=16;break}return window.sessionStorage.clear(),t.$router.push("/"),r.abrupt("return");case 16:t.getUserList();case 17:case"end":return r.stop()}}),r)})))()}}},z=P,E=(r("a07e"),Object(u["a"])(z,U,j,!1,null,"4345c098",null)),M=E.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("素材管理")]),r("el-breadcrumb-item",[e._v("所有素材")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:10}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.searchSceneList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchSceneList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-select",{staticClass:"input-with-select",attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.selectChang},slot:"prepend",model:{value:e.queryInfo.type,callback:function(t){e.$set(e.queryInfo,"type",t)},expression:"queryInfo.type"}},[r("el-option",{attrs:{label:"素材ID",value:1}},[e._v("素材ID")]),r("el-option",{attrs:{label:"用户ID",value:2}},[e._v("用户ID")]),r("el-option",{attrs:{label:"素材MD5",value:3}},[e._v("素材MD5")]),r("el-option",{attrs:{label:"素材标签",value:4}},[e._v("素材类别")]),r("el-option",{attrs:{label:"已删除",value:5}},[e._v("已删除")])],1),r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchSceneList},slot:"append"})],1)],1),r("el-col",{attrs:{span:10}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.deleteScene}},[e._v("批量删除")])],1)],1),r("el-table",{ref:"multipleTable",attrs:{"tooltip-effect":"dark",data:e.scenelist,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),r("el-table-column",{attrs:{align:"center",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"素材封面",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?r("el-image",{staticStyle:{width:"140px",cursor:"pointer"},attrs:{slot:"error","preview-src-list":[e.path.images+t.row.phone_path],src:e.path.images+t.row.phone_path},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"80px",cursor:"pointer"}})]):r("video",{staticStyle:{width:"140px",cursor:"pointer"},attrs:{src:e.path.video+t.row.video_path},on:{click:function(r){return e.showAuditDialog(e.path.video+t.row.video_path)}}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"素材ID",prop:"id"}}),r("el-table-column",{attrs:{align:"center",label:"用户ID",prop:"user_id"}}),r("el-table-column",{attrs:{align:"center",label:"素材MD5",width:"160",prop:"md5"}}),r("el-table-column",{attrs:{align:"center",label:"所属分类",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.classify,(function(t){return r("el-tag",{key:t.id,staticClass:"ele_tag",attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return e.handleprincipalClose(t.id)}}},[e._v(" "+e._s(t.tag_name)+" ")])})),r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(r){return e.principalShowInput(t.row.id)}}},[e._v("+ 添加标签")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"作品类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.type?r("el-tag",[e._v("视频")]):r("el-tag",{attrs:{type:"success"}},[e._v("图片")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"素材状态",width:"140",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-radio-group",{attrs:{size:"mini"},on:{change:function(r){return e.sceneStatuChange(t.row.id,t.row.state)}},model:{value:t.row.state,callback:function(r){e.$set(t.row,"state",r)},expression:"scope.row.state"}},[r("el-radio",{attrs:{label:1,border:""}},[e._v("上线")]),r("el-radio",{attrs:{label:2,border:""}},[e._v("删除")])],1)]}}])}),r("el-table-column",{attrs:{align:"center",label:"描述",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"text_scene_desc"},[e._v(e._s(t.row.scene_desc))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"上传时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.up_time)))]}}])}),r("el-table-column",{attrs:{align:"center",label:"点赞数量",prop:"likeSum"}}),r("el-table-column",{attrs:{align:"center",label:"收藏次数",prop:"collectSum"}}),r("el-table-column",{attrs:{align:"center",label:"评论数量",prop:"commentSum"}}),r("el-table-column",{attrs:{align:"center",label:"审核信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.state_text_id||null==t.row.state_text_id?"无":t.row.state_text_id))]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.start,"page-sizes":[5,10,20,50],"page-size":e.queryInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加分类标签",visible:e.addTagDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addTagDialogVisible=t},close:e.addTagDialogClosed}},[r("div",{staticClass:"tag_seace_content"},[r("el-input",{attrs:{placeholder:"请输入标签关键字",clearable:""},on:{input:e.TagSearch},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.addTagClick}},[e._v("添加标签")])],1),r("el-form",{ref:"addTagRef",attrs:{model:e.addTagForm,"label-width":"70px"}},[r("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.addTagForm.tagPitch,callback:function(t){e.$set(e.addTagForm,"tagPitch",t)},expression:"addTagForm.tagPitch"}},e._l(e.tagList,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id,border:""}},[e._v(e._s(t.name))])})),1)],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.auditDialogVisible,expression:"auditDialogVisible"}],staticClass:"audit_content",on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.auditDialogVisible=!1}}},[r("video",{attrs:{autoplay:"",controls:"",src:e.videoPath}}),r("div",{staticClass:"audit_button",on:{click:function(t){e.auditDialogVisible=!1}}},[r("i",{staticClass:"el-icon-close"})])])],1)},A=[],N=(r("d81d"),{data:function(){return{queryInfo:{query:"",type:1,start:1,limit:5},path:"",scenelist:[],total:0,multipleSelection:[],inputValue:"",addTagDialogVisible:!1,tagList:[],addTagForm:{scene_id:0,tagPitch:[]},auditDialogVisible:!1,videoPath:""}},created:function(){this.path=JSON.parse(window.sessionStorage.getItem("path")),this.getSceneList()},methods:{getSceneList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getSceneList",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.scenelist=a.data,e.total=a.meta.sum;case 8:case"end":return t.stop()}}),t)})))()},searchSceneList:function(){this.queryInfo.start=1,this.getSceneList()},selectChang:function(){this.queryInfo.start=1},handleSelectionChange:function(e){this.multipleSelection=e.map((function(e){return e.id}))},handleSizeChange:function(e){this.queryInfo.limit=e,this.getSceneList()},handleCurrentChange:function(e){this.queryInfo.start=e,this.getSceneList()},deleteScene:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.multipleSelection.length){t.next=2;break}return t.abrupt("return",e.$message.error("请选择素材！"));case 2:return t.next=4,e.$confirm("此操作将改变所选素材为删除状态，是否继续？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 4:if(r=t.sent,"confirm"===r){t.next=7;break}return t.abrupt("return",e.$message.info("已取消删除"));case 7:return t.next=9,e.$http.delete("/deleteScene",{data:{scene_id_arr:e.multipleSelection}});case 9:if(a=t.sent,n=a.data,201===n.meta.status){t.next=13;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 13:e.getSceneList(),e.$message.success("删除成功");case 15:case"end":return t.stop()}}),t)})))()},sceneStatuChange:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.$http.put("/scenestatus",{scene_id:e,status:t});case 2:if(n=a.sent,s=n.data,201===s.meta.status){a.next=8;break}return r.$message.error(s.meta.msg),r.getSceneList(),a.abrupt("return");case 8:r.getSceneList(),r.$message.success("修改成功");case 10:case"end":return a.stop()}}),a)})))()},handleprincipalClose:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("/delsceneTag",{params:{id:e}});case 2:if(a=r.sent,n=a.data,201===n.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error(n.meta.msg));case 6:t.getSceneList(),t.$message.success("删除成功");case 8:case"end":return r.stop()}}),r)})))()},principalShowInput:function(e,t){this.addTagForm.scene_id=e,this.inputValue="",this.tagList=[],this.addTagDialogVisible=!0},TagSearch:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.addTagForm.tagPitch=[],""!==e.inputValue&&null!==e.inputValue){t.next=4;break}return e.tagList=[],t.abrupt("return");case 4:return t.next=6,e.$http.get("/sceneTagSearch?query=".concat(e.inputValue));case 6:if(r=t.sent,a=r.data,200===a.meta.status){t.next=10;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 10:e.tagList=a.data;case 11:case"end":return t.stop()}}),t)})))()},addTagDialogClosed:function(){this.$refs.addTagRef.resetFields()},addTagClick:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.addTagForm.tagPitch.length){t.next=2;break}return t.abrupt("return",e.$message.error("请选择要添加的标签"));case 2:return t.next=4,e.$http.post("/addSceneTags",e.addTagForm);case 4:if(r=t.sent,a=r.data,201===a.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 8:e.addTagForm.tagPitch=[],e.$message.success("添加成功"),e.getSceneList();case 11:case"end":return t.stop()}}),t)})))()},showAuditDialog:function(e){this.videoPath=e,this.auditDialogVisible=!0}},watch:{auditDialogVisible:function(){!1===this.auditDialogVisible&&(this.videoPath="")}}}),H=N,J=(r("c10c"),Object(u["a"])(H,B,A,!1,null,"0bd94011",null)),W=J.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("关键词")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.searchUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUserList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:10}},[r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.removeUserById(!0)}}},[e._v("批量删除")])],1)],1),r("el-table",{attrs:{data:e.userlist,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{align:"center",type:"selection"}}),r("el-table-column",{attrs:{align:"center",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"关键词",prop:"keyword"}}),r("el-table-column",{attrs:{align:"center",label:"搜索次数",prop:"counts"}}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.setkeyword(t.row.keyword)}}},[e._v("修改")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeUserById(!1,t.row.keyword)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.start,"page-sizes":[5,10,20,50,100],"page-size":e.queryInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},K=[],Y=(r("498a"),{data:function(){return{queryInfo:{query:"",start:1,limit:10},userlist:[],total:0,multipleSelection:[]}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getkeyword",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.userlist=a.data,e.total=a.meta.sum;case 8:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.multipleSelection=e.map((function(e){return e.keyword}))},searchUserList:function(){this.queryInfo.start=1,this.getUserList()},handleSizeChange:function(e){this.queryInfo.limit=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.start=e,this.getUserList()},setkeyword:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$prompt("请输入要修改成的关键词","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var r=Object(b["a"])(regeneratorRuntime.mark((function r(a){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=a.value,r.next=3,t.$http.put("/setkeyword",{keyword:e,newKeyword:n.trim()});case 3:if(s=r.sent,i=s.data,201===i.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error(i.meta.msg));case 7:t.$message.success("修改成功"),t.getUserList();case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){t.$message.info("已取消删除")}));case 1:case"end":return r.stop()}}),r)})))()},removeUserById:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function a(){var n,s,i,o,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!0!==e||0!==r.multipleSelection.length){a.next=2;break}return a.abrupt("return",r.$message.error("请选择需要删除的关键词"));case 2:return a.next=4,r.$confirm("此操作将永久删除该搜索关键词, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 4:if(n=a.sent,"confirm"===n){a.next=7;break}return a.abrupt("return",r.$message.info("已取消删除"));case 7:if(void 0===t){a.next=16;break}return a.next=10,r.$http.delete("/delkeyword?keyword=".concat(t));case 10:if(s=a.sent,i=s.data,201===i.meta.status){a.next=14;break}return a.abrupt("return",r.$message.error(i.meta.msg));case 14:a.next=22;break;case 16:return a.next=18,r.$http.post("/delkeyword",{keyword_arr:r.multipleSelection});case 18:if(o=a.sent,u=o.data,201===u.meta.status){a.next=22;break}return a.abrupt("return",r.$message.error(u.meta.msg));case 22:r.$message.success("删除成功"),r.getUserList();case 24:case"end":return a.stop()}}),a)})))()}}}),Q=Y,X=(r("0b75"),Object(u["a"])(Q,G,K,!1,null,"3944187c",null)),Z=X.exports,ee={},te=Object(u["a"])(ee,a,n,!1,null,null,null),re=te.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("标签管理")]),r("el-breadcrumb-item",[e._v("所有标签")])],1),r("el-card",[e._l(e.tagList,(function(t){return r("el-tag",{key:t.id,attrs:{closable:""},on:{close:function(r){return e.handleClose(t.id)}}},[e._v(e._s(t.name))])})),e.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){e.inputVisible=!1}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tag")])],2)],1)},ne=[],se={data:function(){return{tagList:[],inputVisible:!1,inputValue:""}},mounted:function(){this.getTagList()},methods:{getTagList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/getTag");case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.tagList=a.data;case 7:case"end":return t.stop()}}),t)})))()},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.inputValue||void 0===e.inputValue){t.next=6;break}return t.next=3,e.$http.put("/addTag",{name:e.inputValue});case 3:r=t.sent,a=r.data,201!==a.meta.status?e.$message.error(a.meta.msg):(e.$message.success("添加成功"),e.getTagList());case 6:e.inputVisible=!1,e.inputValue="";case 8:case"end":return t.stop()}}),t)})))()},handleClose:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("/delTag?id="+e);case 2:if(a=r.sent,n=a.data,201===n.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error(n.meta.msg));case 6:t.$message.success("删除成功"),t.getTagList();case 8:case"end":return r.stop()}}),r)})))()}}},ie=se,oe=(r("25a1"),Object(u["a"])(ie,ae,ne,!1,null,"69164b45",null)),ue=oe.exports,le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("所有用户")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.searchUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUserList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addDilogVisible}},[e._v("添加账号")])],1)],1),r("el-table",{attrs:{data:e.userlist,border:"",stripe:""}},[r("el-table-column",{attrs:{align:"center",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{width:"80px",align:"center",label:"用户头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-avatar",{attrs:{shape:"square",size:"large",src:e.path.user_images+t.row.user_image}},[r("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"}})])]}}])}),r("el-table-column",{attrs:{align:"center",label:"ID",prop:"id"}}),r("el-table-column",{attrs:{align:"center",label:"用户昵称",prop:"user_name"}}),r("el-table-column",{attrs:{align:"center",label:"性别",prop:"sex"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("sexConvert")(t.row.sex)))]}}])}),r("el-table-column",{attrs:{align:"center",label:"地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("textFilter")(t.row.region)))]}}])}),r("el-table-column",{attrs:{align:"center",label:"手机号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("textFilter")(t.row.phone)))]}}])}),r("el-table-column",{attrs:{align:"center",label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.creat_time)))]}}])}),r("el-table-column",{attrs:{align:"center",label:"最近登录时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.login_information)))]}}])}),r("el-table-column",{attrs:{align:"center",label:"个性签名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("textFilter")(t.row.signature)))]}}])}),r("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.user_type?r("el-tag",{attrs:{type:"success"}},[e._v("正常")]):r("el-tag",{attrs:{type:"danger"}},[e._v("已封号")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-key"},on:{click:function(r){return e.resetPassword(t.row)}}},[e._v("重置密码")]),0==t.row.user_type?r("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-lock"},on:{click:function(r){return e.sealDialog(t.row.id)}}},[e._v("封号")]):r("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-unlock"},on:{click:function(r){return e.sealDialog(t.row.id)}}},[e._v("解除")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.deleteUser(t.row.id)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.start,"page-sizes":[5,10,20,50,100],"page-size":e.queryInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:1==e.DialogVisibleStatus?"添加账户":"编辑账户",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.FormRules,"label-width":"100px"}},[r("el-form-item",{staticClass:"user_image",attrs:{label:"用户头像",prop:"user_image"}},[r("img",{staticClass:"uploadImg",attrs:{src:e.imagesErr}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.shadeSHow,expression:"shadeSHow"}],staticClass:"shade"},[r("span",{staticClass:"iconfont icon-round-loading"})])]),r("el-form-item",{attrs:{label:"用户昵称",prop:"user_name"}},[r("el-input",{model:{value:e.editForm.user_name,callback:function(t){e.$set(e.editForm,"user_name",t)},expression:"editForm.user_name"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},[r("el-radio",{attrs:{label:0,border:""}},[e._v("男")]),r("el-radio",{attrs:{label:1,border:""}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"地区",prop:"region"}},[r("el-input",{model:{value:e.editForm.region,callback:function(t){e.$set(e.editForm,"region",t)},expression:"editForm.region"}})],1),r("el-form-item",{attrs:{label:"账号",prop:"phone"}},[r("el-input",{attrs:{type:"text"},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),e.DialogVisibleStatus?r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1):e._e(),r("el-form-item",{attrs:{label:"个性签名",prop:"signature"}},[r("el-input",{model:{value:e.editForm.signature,callback:function(t){e.$set(e.editForm,"signature",t)},expression:"editForm.signature"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info",disabled:e.shadeSHow},on:{click:e.uploadBtn}},[e._v("上传头像")]),r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")]),r("input",{ref:"uploadImgRef",staticClass:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".png,.jpg,.jpeg",name:""},on:{change:function(t){return e.uploadChange(t)}}})],1)],1),r("el-dialog",{attrs:{title:"重置密码",visible:e.editDialogPassword,width:"50%"},on:{"update:visible":function(t){e.editDialogPassword=t},close:e.PasswordDialogClosed}},[r("el-form",{ref:"editPassWordFormRef",attrs:{model:e.editPasswordForm,rules:e.PassWordFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editPasswordForm.user_name,callback:function(t){e.$set(e.editPasswordForm,"user_name",t)},expression:"editPasswordForm.user_name"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.editPasswordForm.password,callback:function(t){e.$set(e.editPasswordForm,"password",t)},expression:"editPasswordForm.password"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogPassword=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.passWordUserInfo}},[e._v("确 定")])],1)],1)],1)],1)},ce=[],de=(r("159b"),{data:function(){return{queryInfo:{query:"",start:1,limit:10},path:"",userlist:[],total:0,editDialogVisible:!1,shadeSHow:!1,DialogVisibleStatus:!1,imagesErr:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png",editForm:{user_id:0,user_image:"",user_name:"",sex:0,region:"",phone:"",password:"",signature:""},FormRules:{user_image:[{required:!0,message:"请上传头像",trigger:"blur"},{min:1,message:"请上传头像",trigger:"blur"}],user_name:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:1,max:20,message:"用户名的长度应在1~20个字符之间",trigger:"blur"}],signature:[{required:!0,message:"请输入用户个性签名",trigger:"blur"},{min:1,max:15,message:"密码的长度应在1~20个字符之间",trigger:"blur"}],phone:[{required:!0,message:"请输入用于登录的账号",trigger:"blur"},{min:6,max:20,message:"用户名的长度应在6~20个字符之间",trigger:"blur"}]},editDialogPassword:!1,editPasswordForm:{user_id:"",user_name:"",password:""},PassWordFormRules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码的长度应在6~15个位之间",trigger:"blur"}]}}},created:function(){this.path=JSON.parse(window.sessionStorage.getItem("path")),this.getUserList()},methods:{getUserList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/userList",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 6:e.userlist=a.data,e.total=a.meta.sum;case 8:case"end":return t.stop()}}),t)})))()},searchUserList:function(){this.queryInfo.start=1,this.getUserList()},handleSizeChange:function(e){this.queryInfo.limit=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.start=e,this.getUserList()},showEditDialog:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.formatting(),t.DialogVisibleStatus=!1,t.editForm.user_id=e.id,t.editForm.user_image=e.user_image,t.editForm.user_name=e.user_name,t.editForm.sex=e.sex,t.editForm.region=e.region,t.editForm.phone=String(e.phone),t.editForm.signature=e.signature,t.imagesErr=t.path.user_images+e.user_image,t.editDialogVisible=!0;case 11:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},uploadBtn:function(){var e=this.$refs.uploadImgRef;e.click()},uploadChange:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var a,n,s,i,o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=1048576,n=e.target.files[0],!(n.size>a)){r.next=5;break}return t.$message.error("头像大小不能大于1M"),r.abrupt("return");case 5:return s=new FormData,s.append("file",n),i={headers:{"Content-Type":"multipart/form-data"}},t.shadeSHow=!0,r.next=11,t.$http.post("/updateimage?user_id=".concat(t.editForm.user_id),s,i);case 11:if(o=r.sent,u=o.data,201===u.meta.status){r.next=17;break}return t.$message.error(u.meta.msg),t.shadeSHow=!1,r.abrupt("return");case 17:t.editForm.user_image=u.data.path,t.imagesErr=t.path.user_images+u.data.path,t.$message.success(u.meta.msg),t.shadeSHow=!1;case 21:case"end":return r.stop()}}),r)})))()},editUserInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:if(!1!==e.DialogVisibleStatus){t.next=15;break}return t.next=5,e.$http.post("/setVirtualUser",e.editForm);case 5:if(a=t.sent,n=a.data,201===n.meta.status){t.next=10;break}return e.$message.error(n.meta.msg),t.abrupt("return");case 10:return e.shadeSHow=!1,e.userlist.forEach((function(t){t.id===e.editForm.user_id&&(t.user_image=e.editForm.user_image,t.user_name=e.editForm.user_name,t.sex=e.editForm.sex,t.region=e.editForm.region,t.phone=e.editForm.phone,t.signature=e.editForm.signature)})),e.editDialogVisible=!1,e.$message.success("修改成功"),t.abrupt("return");case 15:return e.editForm.password=v()(e.editForm.password),t.next=18,e.$http.post("/addVirtualUser",e.editForm);case 18:if(s=t.sent,i=s.data,201===i.meta.status){t.next=23;break}return e.$message.error(i.meta.msg),t.abrupt("return");case 23:e.shadeSHow=!1,e.editDialogVisible=!1,e.$message.success("添加成功"),e.getUserList();case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},addDilogVisible:function(){this.formatting(),this.DialogVisibleStatus=!0,this.editDialogVisible=!0},formatting:function(){this.imagesErr="https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png",this.editForm={user_id:0,user_image:"",user_name:"",sex:0,region:"",phone:"",password:"",signature:""}},resetPassword:function(e){this.editPasswordForm.user_id=e.id,this.editPasswordForm.user_name=e.user_name,this.editPasswordForm.password=e.password,this.editDialogPassword=!0},PasswordDialogClosed:function(){this.$refs.editPassWordFormRef.resetFields()},passWordUserInfo:function(){var e=this;this.$refs.editPassWordFormRef.validate(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return a={user_id:e.editPasswordForm.user_id,password:v()(e.editPasswordForm.password)},t.next=5,e.$http.post("/virtualReset",a);case 5:if(n=t.sent,s=n.data,201===s.meta.status){t.next=9;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 9:e.editDialogPassword=!1,e.$message.success("重置成功");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},sealDialog:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.put("/sealUser?user_id=".concat(e));case 2:if(a=r.sent,n=a.data,201===n.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error(n.meta.msg));case 6:t.userlist.forEach((function(t){t.id===e&&(t.user_type=n.data.user_type)})),t.$message.success(n.meta.msg);case 8:case"end":return r.stop()}}),r)})))()},deleteUser:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将删除此账号信息，以及移除此账号下的所有素材关联","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",t.$message.info("已取消删除"));case 5:return r.next=7,t.$http.delete("/virtualUserDel?user_id=".concat(e));case 7:if(n=r.sent,s=n.data,201===s.meta.status){r.next=11;break}return r.abrupt("return",t.$message.error("删除失败"));case 11:t.getUserList(),t.$message.success("删除成功");case 13:case"end":return r.stop()}}),r)})))()}}}),me=de,pe=(r("7b5d"),Object(u["a"])(me,le,ce,!1,null,"606c9f40",null)),ge=pe.exports;s["default"].use(g["a"]);var fe=[{path:"/",component:k},{path:"/home",component:R,redirect:"/welcome",children:[{path:"/welcome",component:T},{path:"/allAccount",component:M},{path:"/allScene",component:W},{path:"/keyword",component:Z},{path:"/sceneCrawling",component:re},{path:"/allTag",component:ue},{path:"/AllUser",component:ge}]}],he=new g["a"]({routes:fe});he.beforeEach((function(e,t,r){if("/"===e.path)return r();var a=window.sessionStorage.getItem("token");if(!a)return r("/");r()}));var be=he,we=(r("0fae"),r("5c96"));s["default"].prototype.$confirm=we["MessageBox"].confirm,s["default"].prototype.$prompt=we["MessageBox"].prompt,s["default"].prototype.$message=we["Message"],s["default"].use(we["Button"]).use(we["Form"]).use(we["FormItem"]).use(we["Input"]).use(we["Container"]).use(we["Header"]).use(we["Aside"]).use(we["Menu"]).use(we["Submenu"]).use(we["MenuItem"]).use(we["Main"]),s["default"].use(we["Backtop"]).use(we["Breadcrumb"]).use(we["BreadcrumbItem"]).use(we["Card"]).use(we["Row"]).use(we["Col"]).use(we["Tag"]).use(we["Avatar"]).use(we["Select"]),s["default"].use(we["Table"]).use(we["TableColumn"]).use(we["Switch"]).use(we["Pagination"]).use(we["Dialog"]).use(we["Radio"]).use(we["RadioGroup"]).use(we["Option"]),s["default"].use(we["CheckboxGroup"]).use(we["Checkbox"]).use(we["Image"]);r("aede"),r("82da");var ve=r("323e"),ye=r.n(ve);r("a5d8");p.a.defaults.baseURL="/admin",p.a.interceptors.request.use((function(e){return ye.a.start(),e.headers.Authorization=window.sessionStorage.getItem("token"),e})),p.a.interceptors.response.use((function(e){return ye.a.done(),e})),s["default"].prototype.$http=p.a,s["default"].config.productionTip=!1,s["default"].filter("dateFormat",(function(e){var t=new Date(e),r=t.getFullYear(),a=(t.getMonth()+1+"").padStart(2,"0"),n=(t.getDate()+"").padStart(2,"0"),s=(t.getHours()+"").padStart(2,"0"),i=(t.getMinutes()+"").padStart(2,"0"),o=(t.getSeconds()+"").padStart(2,"0");return"".concat(r,"-").concat(a,"-").concat(n," ").concat(s,":").concat(i,":").concat(o)})),s["default"].filter("sexConvert",(function(e){return 0===e?"男":1===e?"女":"未设置"})),s["default"].filter("textFilter",(function(e){return null===e||""===e?"未设置":e})),new s["default"]({router:be,render:function(e){return e(d)}}).$mount("#app")},"6a69":function(e,t,r){},"6f9f":function(e,t,r){},"7b5d":function(e,t,r){"use strict";r("483f")},"82da":function(e,t,r){},"95fc":function(e,t,r){e.exports=r.p+"img/home.26219e31.jpg"},a07e:function(e,t,r){"use strict";r("6f9f")},aede:function(e,t,r){},baf9:function(e,t,r){},c048:function(e,t,r){},c105:function(e,t,r){},c10c:function(e,t,r){"use strict";r("c105")},cf05:function(e,t,r){e.exports=r.p+"img/logo.72ad7a57.png"},e83b:function(e,t,r){},fcbf:function(e,t,r){"use strict";r("baf9")}});
//# sourceMappingURL=app.c9c72ece.js.map